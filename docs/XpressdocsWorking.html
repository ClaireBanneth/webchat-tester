<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
</head>

<body>
    <form id="chatForm">
        <h3>Participant Information- local</h3>

        <table class="webchat-config">
            <tbody>
                <tr>
                    <th>First Name:</th>
                    <td><input type="text" id="first-name" value="John" /></td>
                </tr>
                <tr>
                    <th>Last Name:</th>
                    <td><input type="text" id="last-name" value="Doe" /></td>
                </tr>
                <tr>
                    <th>Email Address:</th>
                    <td><input type="text" id="email" value="" /></td>
                </tr>
				<tr>
                    <th>Store Name:</th>
                    <td><input type="text" id="store-name" value="" /></td>
                </tr>
				<tr>
                    <th>Company:</th>
                    <td><input type="text" id="company" value="" /></td>
                </tr>
				<tr>
                    <th>Telephone Number:</th>
                    <td><input type="text" id="number" value="" /></td>
                </tr>
				<tr>
                    <th>Order ID (N/A if not related to an order):</th>
                    <td><input type="text" id="order-id" value="" /></td>
                </tr>
            </tbody>
        </table>
        <button type="button" id="chat-button">Start Chat</button>
    </form>
    <div id="chat-container" style="height:600px"></div>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
       <script id="purecloud-webchat-js"
            type="text/javascript"
            src="https://apps.mypurecloud.com/webchat/jsapi-v1.js"
            region="us-east-1"
            org-guid="fd567749-88c3-492f-9a49-5d951e7d698d"
            deployment-key="76211205-16cc-4ebe-be66-e1873388d964"></script>

    <script type="text/javascript">


    <script type="text/javascript">
        $(document).ready(function initializeChat () {
            var chatConfig = {
                // Web chat application URL
                webchatAppUrl: 'https://apps.mypurecloud.com/webchat',
                // Web chat service URL
                webchatServiceUrl: 'https://realtime.mypurecloud.com:443',
                // Numeric organization ID
                orgId: 17328,
                // Organization name. Replace with your org name.
                orgName: 'xpressdocs',
                // Requested agent language skill (Agent must have this language skill to receive chat)
                //language: 'English - Written',
                // Requested agent skills (Agent must have these skills to receive chat)
                //skills: ['Computers', 'Printers'],
                // OR
                //skills: [],
                // Priority
                priority: 0,
                // Queue Name
                queueName : 'Web Chat',
                // Target agent email (OPTIONAL)
                //agentEmail: 'alex.agent@example.com',
                // Whether to show submit button or send message on Enter keypress
                showSubmitButton: true,
                // Log level
                logLevel: 'DEBUG',
                // Locale code
                locale: 'en',
                // Whether to allow reconnects
                reconnectEnabled: true,
                //Allowed reconnect origins
                reconnectOrigins: ['https://example.com', 'https://help.example.com', 'https://shop.example.com'],
                // Logo used within the chat window
                "companyLogoSmall": {
                    "width": 150,
                    "height": 32,
                    "url": "https://www.xdplatform.com/wp-content/uploads/2015/09/xpressdocs_logo_blk_sticky.png"
                },
                "agentAvatar": {
                    "width": 462,
                    "height": 462,
                    "url": "https://d3a63qt71m2kua.cloudfront.net/developer-tools/917/assets/images/agent.jpg"
                },

                // Text displayed with chat window is displayed
                welcomeMessage: 'Thanks for chatting.',
                // CSS class applied to the chat window
                cssClass: 'webchat-frame',
                // Custom style applied to the chat window
                css: {
                    width: '100%',
                    height: '100%'
                }
            };
            var chatButton = document.getElementById('chat-button');
            // Required if reconnects are enabled
            window.PURECLOUD_WEBCHAT_FRAME_CONFIG = {
                containerEl: 'chat-container'
            };
            ININ.webchat.create(chatConfig)
                .then(function (webchat) {
                    // Optionally use isAutoJoined if reconnects are enabled
                    if (webchat.isAutoJoined()) {
                        // Do something to disable chat button
                    } else {
                        chatButton.onclick = function () {
                            var firstName = document.getElementById('first-name').value;
                            var lastName = document.getElementById('last-name').value;
                            var emailAddress = document.getElementById('email').value;
							var storeName = document.getElementById('store-name').value;
							var company = document.getElementById('company').value;
							var telephoneNumber = document.getElementById('number').value;
							var orderid = document.getElementById('order-id').value;
							
                            // Use getConfig.setConfigProperty() for any web chat configuration property to dynamically set config values.
                            webchat.getConfig().setData({
                                firstName: firstName,
                                lastName: lastName,
                                emailAddress: emailAddress,
                                storeName: storeName,
                                company: company,
                                phoneNumber: telephoneNumber,
                                orderId: orderid,
                                customerId: 59606
                            });
                            //Use the updateConfig function to update batches of properties by passing in a partially filled chatConfig object
                            webchat.updateConfig({
                                queueName : 'Web Chat',
                                locale: 'en',
                                welcomeMessage: 'Thank you for choosing Xpressdocs! A Client Services Representative will be with you momentarily.',
                            });
                            // Alternatively, call webchat.renderPopup here. Note that reconnects do not apply to popup chat.
                            webchat.renderFrame({
                                containerEl: 'chat-container'
                            });
                        };
                    }
                })
                .catch(function (err){
                    console.log(err);
                });
        });
    </script>

</body>
</html>